<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Lab 2 - ES3011 Experimental Lab</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../../theme_override.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Lab 2";
    var mkdocs_page_input_path = "lab-docs/lab2.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../lab-overview/" class="icon icon-home"> ES3011 Experimental Lab</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../lab-overview/">Lab Overview</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Lab Instructions</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../lab1/">Lab 1</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Lab 2</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#lab_2_mathematical_modeling_i">Lab 2: Mathematical Modeling I</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#introduction">Introduction</a></li>
        
            <li><a class="toctree-l4" href="#1_mathematical_modeling_of_basic_dynamical_systems">1. Mathematical Modeling of Basic Dynamical Systems</a></li>
        
            <li><a class="toctree-l4" href="#2_mathematical_modeling_of_the_balbot">2. Mathematical Modeling of the BalBot</a></li>
        
            <li><a class="toctree-l4" href="#3_testing_balbot_imu_calibration">3. Testing Balbot IMU Calibration</a></li>
        
            <li><a class="toctree-l4" href="#what_to_submit">What to Submit:</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../lab3/">Lab 3</a>
                </li>
                <li class="">
                    
    <a class="" href="../lab4/">Lab 4</a>
                </li>
                <li class="">
                    
    <a class="" href="../lab5/">Lab 5</a>
                </li>
                <li class="">
                    
    <a class="" href="../lab6/">Lab 6</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../lab-overview/">ES3011 Experimental Lab</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../lab-overview/">Docs</a> &raquo;</li>
    
      
        
          <li>Lab Instructions &raquo;</li>
        
      
    
    <li>Lab 2</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="lab_2_mathematical_modeling_i">Lab 2: Mathematical Modeling I<a class="headerlink" href="#lab_2_mathematical_modeling_i" title="Permanent link">&para;</a></h1>
<!-- ###### Description
* Learn how to develop mathematical models of physical dynamic systems. This would include:
    * Mass-spring-damper
    * DC motor
    * Self-balancing robot

###### What to Submit
* Report showing a summary of exercises completed for MATLAB and Simulink.
    * MATLAB code showing the state-space model of each dynamic systems -->

<!-- ![work_in_progress](../media/wip.jpg) -->

<h4 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h4>
<p>Welcome to the second session of the ES3011 experimental labs. In this lab, we focus on mathematical modeling. The central question is <em>"How do describe/model our physical system mathematically to be able to anaylze its behavior?"</em></p>
<p>We will cover three sections in this lab:</p>
<ol>
<li>
<p>Mathematical modeling of basic dynamical systems</p>
</li>
<li>
<p>Mathematical modeling of of the BalBot (self-balancing robot)</p>
</li>
<li>
<p>Testing Balbot IMU Calibration</p>
</li>
</ol>
<h5 id="learning_outcomes">Learning Outcomes<a class="headerlink" href="#learning_outcomes" title="Permanent link">&para;</a></h5>
<p>Our goal at the end of this labs is that you should be able to:</p>
<ul>
<li>Understand and describe/model physical dynamic systems mathematically using differential equations</li>
<li>Convert the differential equations to state-space model form by hand and using MATLAB functionality</li>
</ul>
<hr />
<p><br></p>
<h4 id="1_mathematical_modeling_of_basic_dynamical_systems">1. Mathematical Modeling of Basic Dynamical Systems<a class="headerlink" href="#1_mathematical_modeling_of_basic_dynamical_systems" title="Permanent link">&para;</a></h4>
<p>In this section, you will develop mathematical models for basic dynamical systems considered in control systems such as the mass-spring-damper and the DC motor. These models will then be put into state-space representation which will be used in future lab sessions for simulation and analysis.</p>
<h5 id="instructions">Instructions:<a class="headerlink" href="#instructions" title="Permanent link">&para;</a></h5>
<p>In this lab <a href="../documents/Lab2.pdf">instruction sheet</a>,</p>
<ul>
<li>Review the MATLAB Intro section</li>
<li>Complete problems I (Mass-spring-damper) and IV (Motor position)</li>
</ul>
<hr />
<p><br></p>
<h4 id="2_mathematical_modeling_of_the_balbot">2. Mathematical Modeling of the BalBot<a class="headerlink" href="#2_mathematical_modeling_of_the_balbot" title="Permanent link">&para;</a></h4>
<p><img alt="robot" src="../media/robot.png" /></p>
<p>In this section, we will derive the mathematical model for the Balbot.</p>
<h5 id="instructions_1">Instructions:<a class="headerlink" href="#instructions_1" title="Permanent link">&para;</a></h5>
<p>In this lab <a href="../documents/ES3011_LAB2.pdf">instruction sheet</a>,</p>
<ul>
<li>You are required to answer all 5 questions in the sheet and record your solutions in your report.</li>
</ul>
<hr />
<p><br></p>
<h4 id="3_testing_balbot_imu_calibration">3. Testing Balbot IMU Calibration<a class="headerlink" href="#3_testing_balbot_imu_calibration" title="Permanent link">&para;</a></h4>
<p>In Lab 1, we completed the IMU calibration process to ensure the robot get accurate feedback from the IMU sensor about its orientation. In this section, we will now test the calibration process by reading off the robot's pitch values on MATLAB using serial comm.</p>
<h5 id="instructions_2">Instructions:<a class="headerlink" href="#instructions_2" title="Permanent link">&para;</a></h5>
<p><strong>1. Update your Balbot software:</strong></p>
<ul>
<li>To update the Balbot software on your local PC, please run the <code>git pull</code> command in the directory where you cloned the WPI-ES3011 repository</li>
</ul>
<!-- ``` shell
$ git pull
``` -->

<p><strong>2. Build and upload code to the Balbot:</strong></p>
<ul>
<li>First, connect the robot to your PC via USB.</li>
<li>Start up VS Code and, following the procedure in Lab 1, build and upload the code to the robot.</li>
</ul>
<p><strong>3. Test the IMU calibration on MATLAB:</strong></p>
<ul>
<li>Next step is to start up MATLAB. </li>
<li>Make sure you navigate to directory where you have saved the WPI-ES3011 Lab software</li>
<li>Run the following command in your MATLAB command window (instead of <team-ID> add your actual team ID, e.g. 'Team 1')</li>
</ul>
<pre><code class="matlab">&gt;&gt; balbot_serial(&lt;team-ID&gt;)
</code></pre>

<ul>
<li>Make sure you observe that the pitch value changes correctly as you manually move the robot about the X-axis.</li>
<li>Take screen shots of your MATLAB output (similar to Fig. 2) when the robot is in three positions:<ul>
<li>Upright position (pitch = ~0 rad)</li>
<li>Leaning backward (as far as you can go)</li>
<li>Leaning forward (as far as you can go)</li>
</ul>
</li>
</ul>
<p><br></p>
<p><em>Fig 1:</em>
<img alt="lab2-command" src="../media/lab2-command.png" /></p>
<p><em>Fig 2:</em>
<img alt="lab2-result" src="../media/lab2-result.png" /></p>
<hr />
<p><br></p>
<h4 id="what_to_submit">What to Submit:<a class="headerlink" href="#what_to_submit" title="Permanent link">&para;</a></h4>
<p>Prepare a report which contains the following:</p>
<ul>
<li><strong>Introduction:</strong> a few sentences to introduce the topic of the lab</li>
<li><strong>Section 1:</strong> Mathematical Modeling of Basic Dynamical Systems (MATLAB)<ul>
<li>Include free-body diagram and/or equations of motion for the two systems assigned.</li>
<li>Publish your MATLAB script with the defined state-space models as a PDF. Follow this <a href="https://www.mathworks.com/help/matlab/matlab_prog/publishing-matlab-code.html">guide</a> to see how to.</li>
</ul>
</li>
<li><strong>Section 2:</strong> Mathematical Modeling of the BalBot <ul>
<li>Present your answers to the five questions in your report. Make sure you include a free-body diagram of the robot in your report.</li>
</ul>
</li>
<li><strong>Section 3:</strong> Test the IMU calibration on MATLAB<ul>
<li>Show the three MATLAB screen shots as described above.</li>
</ul>
</li>
<li><strong>Conclusion:</strong> a few sentences concluding the report explaining the goals, what you learned, and any other conclusions.</li>
</ul>
<!-- We can take a simplified approach to the modeling problem by decomposing the BalBot system into sub-components. This is a convenient assumption to simplify the modeling task. The sub-components are: (1) the robot wheels, (2) the motors, (3) robot chassis.  -->

<!-- ###### Preliminaries: Review the equivalent free-body diagram for the complete system

Following the system decomposition, we can draw a simplified representation of the robot as above. We have made a few assumptions:

* The robot moves only in the X-Y plane.
* The robot wheels don't slip, hence we can assume the wheel position is linearly related to the wheel radius and angular displacement.

![complete_system](../media/complete_system.jpg)



###### Question 1: Derive the equations of motion for the robot wheel

We have provided the free-body diagram of the robot wheel below. Your task is to derive the equations of motion for the wheel given the forces and torques acting on the wheel.

!!! note
    * `Fx` and `Fy` are the reaction forces of the robot chassis on the wheel.
    * `theta_wheel` is the angular displacement of the wheel.
    * `N` is the reaction force on the ground.
    * `Ft` is the traction force.
    * `Tm` is the motor torque on the wheel.

![wheel](../media/wheel.jpg)


###### Question 2: Derive the equations of motion for the robot chassis

We have provided the free-body diagram of the robot chassis below. Your task is to derive the equations of motion for the chassis given the forces and torques acting on it.

!!! note
    * `Fx` and `Fy` are the reaction forces of the robot chassis on the wheel.
    * `theta_p` is the angular displacement of the robot chassis in the sagittal plane.
    * `Mr` is the mass of the robot chassis.
    * `Tm` is the motor torque on the wheel.

![chassis](../media/chassis.jpg)


###### Question 3: Derive the relationship between motor torque and voltage, speed, etc.

Finally, you need to derive an equation which relates the torque generated by the motor and the supplied voltage. This is required to replace the torque values in the above equations because the control input to BalBot is motor voltage.

Please refer to the lab [instruction sheet](../documents/Lab2.pdf) for a reminder on the equations describing a DC motor.

![chassis](../media/motor.jpg) -->
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../lab3/" class="btn btn-neutral float-right" title="Lab 3">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../lab1/" class="btn btn-neutral" title="Lab 1"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../lab1/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../lab3/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
